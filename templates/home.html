{% extends 'base.html' %} 
{% block content %}
<form method="post" class="buttons">
  <h3>Enter The Chat Room</h3>
  <div>
    <label>Name:</label>
    <input
      type="text"
      placeholder="Pick a name!"
      name="name"
      value="{{name}}"
    />
  </div>
  <div class="join">
    <input type="text" placeholder="Room Code" name="code" value="{{code}}" />
    <button type="submit" name="join" value="join">Join a Room</button> <!-- Fix: added value="join" -->
  </div>
  <button type="submit" name="create" value="create" class="create-btn">Create a Room</button> <!-- Fix: added value="create" -->
  
  {% if error %}
  <ul>
    <li>{{error}}</li>
  </ul>
  {% endif %}
</form>

{% if shareable_link %}
<h3>Share this link to invite friends:</h3>
<input type="text" value="{{ shareable_link }}" readonly />
<button onclick="copyToClipboard()">Copy Link</button>
<script>
  function copyToClipboard() {
    const link = document.querySelector('input[type="text"]').value;
    navigator.clipboard.writeText(link).then(() => {
      alert('Link copied to clipboard!');
    });
  }
</script>
{% endif %}
{% endblock %}